<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë…ë„ ì—­ì‚¬ ì—°ëŒ€ê¸°: ì£¼ê¶Œì˜ ê¸°ë¡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Pretendard í°íŠ¸ ì ìš© - ê°€ì¥ ê¹”ë”í•˜ê³  í˜„ëŒ€ì ì¸ ì›¹ í°íŠ¸ */
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css');
        
        :root {
            --font-main: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, 'Helvetica Neue', 'Segoe UI', 'Apple SD Gothic Neo', 'Noto Sans KR', 'Malgun Gothic', sans-serif;
        }

        body {
            font-family: var(--font-main);
            background-color: #f8f9fa;
            letter-spacing: -0.01em;
        }
        
        h1, h2, h3, .serif {
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        /* Chart Container Styles */
        .chart-wrapper {
            position: relative;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 4px 20px -5px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
        }

        .main-chart-container {
            max-width: 900px;
            height: 300px;
            max-height: 400px;
        }

        .analysis-chart-container {
            max-width: 500px;
            height: 300px;
            max-height: 350px;
        }

        @media (min-width: 768px) {
            .main-chart-container {
                height: 400px;
            }
        }

        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar {
            width: 5px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #e5e7eb;
            border-radius: 10px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #d1d5db;
        }

        .card-transition {
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card-transition:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .category-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 6px;
        }
    </style>
</head>
<body class="text-slate-900">

    <!-- Header Section -->
    <header class="bg-white text-slate-900 border-b border-slate-200 py-8 px-4 relative">
        <div class="max-w-6xl mx-auto flex flex-col items-center">
            <!-- Home Button -->
            <a href="index.html" class="absolute left-4 top-8 md:left-8 bg-slate-100 hover:bg-slate-200 text-slate-700 px-4 py-2 rounded-full transition-colors flex items-center space-x-2 text-sm font-medium border border-slate-200">
                <span>ğŸ  í™ˆìœ¼ë¡œ</span>
            </a>
            
            <div class="text-center mt-12 md:mt-0">
                <span class="inline-block px-3 py-1 rounded-full bg-blue-50 text-blue-600 text-xs font-bold mb-3 tracking-wider uppercase">Republic of Korea</span>
                <h1 class="text-3xl md:text-5xl font-black mb-4 tracking-tight">ë…ë„ ì—­ì‚¬ ì—°ëŒ€ê¸°</h1>
                <p class="text-slate-500 max-w-2xl mx-auto leading-relaxed text-base">
                    ì²œ ë…„ì˜ ì„¸ì›”ì´ ì¦ëª…í•˜ëŠ” ê¸°ë¡, ì£¼ê¶Œì˜ ì—­ì‚¬ë¥¼ ë”°ë¼ê°€ ë´…ë‹ˆë‹¤. <br class="hidden md:block">
                    ê° ì‹œëŒ€ë³„ ì£¼ìš” ë¬¸í—Œê³¼ ê²°ì •ì  ì‚¬ê±´ì„ ì¸í„°ë™í‹°ë¸Œ ëŒ€ì‹œë³´ë“œë¡œ í™•ì¸í•˜ì„¸ìš”.
                </p>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto p-4 md:p-6 space-y-12">

        <!-- DASHBOARD SECTION -->
        <section id="dashboard" class="space-y-8">
            
            <!-- Timeline Visualizer -->
            <div class="flex flex-col space-y-4">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-end px-2 gap-4">
                    <div>
                        <h3 class="text-2xl font-bold text-slate-800">ğŸ“œ íƒ€ì„ë¼ì¸ ì‹œê°í™”</h3>
                        <p class="text-slate-400 text-sm">ë°ì´í„° í¬ì¸íŠ¸ë¥¼ í´ë¦­í•˜ì—¬ ìƒì„¸ ë‚´ì—­ì„ í™•ì¸í•˜ì„¸ìš”.</p>
                    </div>
                    <div class="flex flex-wrap gap-3 text-xs font-semibold text-slate-500 bg-white p-3 rounded-xl border border-slate-100 shadow-sm">
                        <span class="flex items-center"><i class="category-dot bg-blue-500"></i>í•œêµ­ì£¼ê¶Œ</span>
                        <span class="flex items-center"><i class="category-dot bg-emerald-500"></i>ì¼ë³¸ì¸ì •</span>
                        <span class="flex items-center"><i class="category-dot bg-rose-500"></i>í˜„ëŒ€ë¶„ìŸ/ì™œê³¡</span>
                        <span class="flex items-center"><i class="category-dot bg-slate-400"></i>êµ­ì œ/ê¸°íƒ€</span>
                    </div>
                </div>
                <div class="chart-wrapper main-chart-container">
                    <canvas id="timelineChart"></canvas>
                </div>
            </div>

            <!-- Detail & List Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                
                <!-- LEFT: Focus Card (Dynamic Content) -->
                <div class="lg:col-span-8 space-y-4">
                    <h3 class="text-sm font-bold text-slate-400 uppercase tracking-widest px-2">Focus View</h3>
                    
                    <div id="detail-card" class="bg-white rounded-2xl shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden min-h-[350px] flex flex-col transition-all duration-500">
                        <div id="detail-header" class="bg-slate-900 text-white p-8">
                            <div class="flex justify-between items-start">
                                <div class="space-y-3">
                                    <span id="detail-year" class="inline-block bg-white/20 backdrop-blur-md text-white text-xs px-3 py-1 rounded-full font-bold">ì—°ë„ ì„ íƒ</span>
                                    <h2 id="detail-title" class="text-3xl font-bold leading-tight tracking-tight">ì‚¬ê±´ì„ ì„ íƒí•´ì£¼ì„¸ìš”</h2>
                                </div>
                                <div id="detail-icon" class="text-5xl opacity-80 filter grayscale brightness-200">ğŸ‘†</div>
                            </div>
                        </div>
                        <div class="p-8 flex-grow flex flex-col justify-between space-y-6">
                            <div>
                                <h4 class="text-xs font-black text-slate-300 uppercase mb-4 tracking-tighter">Historical Context</h4>
                                <p id="detail-content" class="text-xl text-slate-700 leading-relaxed font-medium">
                                    ë…ë„ì˜ ì—­ì‚¬ëŠ” ë‹¨ìˆœí•œ ì˜í†  ë¬¸ì œë¥¼ ë„˜ì–´ ìš°ë¦¬ ë¯¼ì¡±ì˜ ìì¡´ê°ê³¼ ì—°ê²°ë©ë‹ˆë‹¤. ë¦¬ìŠ¤íŠ¸ì—ì„œ í•­ëª©ì„ í´ë¦­í•´ ë³´ì„¸ìš”.
                                </p>
                            </div>
                            <div class="bg-slate-50 p-4 rounded-xl border border-slate-100 flex items-center justify-between">
                                <span class="text-xs font-bold text-slate-400">ë¬¸í—Œ ê·¼ê±° (Source)</span>
                                <span id="detail-source" class="text-sm font-bold text-blue-600 bg-blue-50 px-3 py-1 rounded-lg">---</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RIGHT: Scrollable List -->
                <div class="lg:col-span-4 space-y-4 flex flex-col">
                    <h3 class="text-sm font-bold text-slate-400 uppercase tracking-widest px-2">Archive List</h3>
                    <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden flex-grow h-[450px]">
                        <div id="event-list" class="overflow-y-auto h-full custom-scroll p-3 space-y-2">
                            <!-- List items generated by JS -->
                        </div>
                    </div>
                </div>
            </div>

        </section>

        <!-- ANALYSIS SECTION -->
        <section class="bg-white rounded-3xl p-8 md:p-12 border border-slate-100 shadow-sm">
            <div class="max-w-3xl mb-12">
                <h2 class="text-3xl font-black text-slate-900 mb-4 tracking-tight">ğŸ” ë°ì´í„°ë¡œ ë³´ëŠ” ë…ë„</h2>
                <p class="text-slate-500 text-lg leading-relaxed">
                    ìˆ˜ì§‘ëœ ì—­ì‚¬ì  ê¸°ë¡ë“¤ì„ ë¶„ì„í•´ë³´ë©´, í•œêµ­ì˜ ì˜ìœ ê¶Œ ì£¼ì¥ì€ ìˆ˜ ì„¸ê¸° ë™ì•ˆ ì¼ê´€ëœ ë°˜ë©´, ì¼ë³¸ì˜ ì˜ìœ ê¶Œ ì£¼ì¥ì€ ì œêµ­ì£¼ì˜ íŒ½ì°½ê¸°ì™€ ë§ë¬¼ë ¤ ìˆìŒì„ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
                <!-- Analysis 1: Category Distribution -->
                <div class="space-y-6">
                    <div class="flex items-center space-x-3 mb-2">
                        <span class="w-1.5 h-6 bg-blue-600 rounded-full"></span>
                        <h3 class="text-xl font-bold text-slate-800">ê¸°ë¡ ìœ í˜•ë³„ ë¹„ì¤‘</h3>
                    </div>
                    <div class="chart-wrapper analysis-chart-container">
                        <canvas id="categoryChart"></canvas>
                    </div>
                </div>

                <!-- Analysis 2: Summary Insight -->
                <div class="space-y-8">
                    <div class="flex items-center space-x-3 mb-2">
                        <span class="w-1.5 h-6 bg-slate-900 rounded-full"></span>
                        <h3 class="text-xl font-bold text-slate-800">ì£¼ìš” í†µê³„ ì¸ì‚¬ì´íŠ¸</h3>
                    </div>
                    
                    <div class="grid gap-4">
                        <div class="p-6 rounded-2xl bg-blue-50 border border-blue-100 card-transition">
                            <h4 class="text-blue-900 font-bold mb-1">ì§€ì†ì„± (Consistency)</h4>
                            <p class="text-blue-700 text-sm leading-relaxed">ì¡°ì„  ì´ˆê¸°ë¶€í„° ëŒ€í•œì œêµ­ê¹Œì§€ ê´€ì°¬ ì§€ë¦¬ì§€ë¥¼ í†µí•´ ì¼ê´€ë˜ê²Œ ì£¼ê¶Œì„ í–‰ì‚¬í•´ ì™”ìŠµë‹ˆë‹¤.</p>
                        </div>
                        <div class="p-6 rounded-2xl bg-emerald-50 border border-emerald-100 card-transition">
                            <h4 class="text-emerald-900 font-bold mb-1">ìƒí˜¸ ì¸ì • (Acknowledgement)</h4>
                            <p class="text-emerald-700 text-sm leading-relaxed">ê³¼ê±° ì¼ë³¸ì˜ ê³µë¬¸ì„œ(íƒœì •ê´€ ì§€ë ¹ ë“±)ì—ì„œë„ ë…ë„ëŠ” í•œêµ­ ì˜í† ì„ì„ ëª…í™•íˆ ì¸ì •í•œ ë°” ìˆìŠµë‹ˆë‹¤.</p>
                        </div>
                        <div class="p-6 rounded-2xl bg-rose-50 border border-rose-100 card-transition">
                            <h4 class="text-rose-900 font-bold mb-1">ì¹¨íƒˆì˜ ì—­ì‚¬ (Agression)</h4>
                            <p class="text-rose-700 text-sm leading-relaxed">í˜„ëŒ€ì˜ ê°ˆë“±ì€ 1905ë…„ ì œêµ­ì£¼ì˜ ì¹¨ëµ ê³¼ì •ì—ì„œì˜ ë¶ˆë²• í¸ì… ì‹œë„ì—ì„œ ê¸°ì¸í•©ë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-900 text-slate-500 py-12 text-center mt-20">
        <div class="max-w-6xl mx-auto px-4">
            <h2 class="text-white font-bold mb-4">ë…ë„(Dokdo) ì—­ì‚¬ ì¸í„°ë™í‹°ë¸Œ</h2>
            <p class="text-sm mb-6 max-w-md mx-auto">ì´ ëŒ€ì‹œë³´ë“œëŠ” ì—­ì‚¬ì  ë¬¸í—Œê³¼ ê³µì¸ëœ ìë£Œë¥¼ ë°”íƒ•ìœ¼ë¡œ êµìœ¡ì  ëª©ì ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
            <div class="h-px bg-slate-800 w-24 mx-auto mb-6"></div>
            <p class="text-xs uppercase tracking-widest font-bold">Â© 2026 Interactive History Project</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        const dokdoData = [
            { year: 1454, title: "ì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€", content: "ìš°ì‚°(ë…ë„)ê³¼ ë¬´ë¦‰(ìš¸ë¦‰ë„)ì´ ê°•ì›ë„ ìš¸ì§„í˜„ì— ì†í•œë‹¤ê³  ê¸°ë¡. ì¡°ì„ ì˜ ê´€í• ê¶Œ ëª…ì‹œ.", source: "[1]", category: 1 },
            { year: 1531, title: "ì‹ ì¦ë™êµ­ì—¬ì§€ìŠ¹ëŒ", content: "ë…ë„ê°€ ìš°ë¦¬ ì˜í† ì„ì„ ë°íˆëŠ” ê´€ì°¬ ì§€ë¦¬ì§€ í¸ì°¬.", source: "[2]", category: 1 },
            { year: 1667, title: "ì€ì£¼ì‹œì²­í•©ê¸°", content: "ì¼ë³¸ ë¬¸í—Œ. ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ì¼ë³¸ ì˜í†  ë°–(ì¡°ì„  ë•…)ì„ì„ ìŠ¤ìŠ¤ë¡œ ê¸°ë¡í•¨.", source: "[3]", category: 2 },
            { year: 1693, title: "1ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´", content: "ì•ˆìš©ë³µì´ ì¼ë³¸ìœ¼ë¡œ ëŒë ¤ê°€ ë…ë„ê°€ ì¡°ì„  ë•…ì„ì„ ê°•ë ¥íˆ ì£¼ì¥.", source: "[4]", category: 1 },
            { year: 1696, title: "2ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´", content: "ì•ˆìš©ë³µì´ ì¼ë³¸ì— ê±´ë„ˆê°€ í•­ì˜. ì¼ë³¸ ë§‰ë¶€ê°€ 'ìš¸ë¦‰ë„ ë„í•´ ê¸ˆì§€ë ¹'ì„ ë‚´ë ¤ ì¡°ì„  ì˜í† ì„ì„ ì¸ì •.", source: "[5]", category: 2 },
            { year: 1785, title: "ì‚¼êµ­ì ‘ì–‘ì§€ë„", content: "ì¼ë³¸ í•™ì í•˜ì•¼ì‹œ ì‹œí—¤ì´ ì œì‘. ë…ë„ë¥¼ ì¡°ì„ ìƒ‰(í™©ìƒ‰)ìœ¼ë¡œ ì¹ í•˜ê³  'ì¡°ì„ ì˜ ê²ƒ'ìœ¼ë¡œ í‘œê¸°.", source: "[6]", category: 2 },
            { year: 1877, title: "íƒœì •ê´€ ì§€ë ¹", content: "ì¼ë³¸ ìµœê³  í–‰ì •ê¸°ê´€ì´ 'ë…ë„ì™€ ìš¸ë¦‰ë„ëŠ” ì¼ë³¸ê³¼ ê´€ê³„ì—†ë‹¤'ê³  ê³µì‹ì ìœ¼ë¡œ ì¸ì •í•˜ê³  ì§€ë ¹ì„ ë‚´ë¦¼.", source: "[7]", category: 2 },
            { year: 1900, title: "ëŒ€í•œì œêµ­ ì¹™ë ¹ 41í˜¸", content: "ê³ ì¢… í™©ì œê°€ ë…ë„ë¥¼ ìš¸ë¦‰êµ°ì˜ ê´€í•  êµ¬ì—­ìœ¼ë¡œ ê³µì‹ ë°˜í¬. ê·¼ëŒ€ë²•ì ìœ¼ë¡œ ì˜ìœ ê¶Œ ì¬í™•ì¸.", source: "[8]", category: 1 },
            { year: 1905, title: "ì‹œë§ˆë„¤í˜„ ê³ ì‹œ 40í˜¸", content: "ì¼ë³¸ì´ ëŸ¬ì¼ì „ìŸ ì¤‘ êµ°ì‚¬ì  ëª©ì ìœ¼ë¡œ ë…ë„ë¥¼ ë¶ˆë²•ì ìœ¼ë¡œ 'ë‹¤ì¼€ì‹œë§ˆ'ë¡œ í¸ì….", source: "[9]", category: 3 },
            { year: 1906, title: "ì‹¬í¥íƒ ë³´ê³ ì„œ", content: "ìš¸ë¦‰êµ°ìˆ˜ ì‹¬í¥íƒì´ ë…ë„ ë¶ˆë²• í¸ì… ì†Œì‹ì„ ë“£ê³  'ë³¸êµ° ì†Œì†'ì„ì„ ëª…ì‹œí•˜ì—¬ ì¤‘ì•™ ì •ë¶€ì— ë³´ê³ .", source: "[8]", category: 1 },
            { year: 1946, title: "SCAPIN ì œ677í˜¸", content: "ì—°í•©êµ°ìµœê³ ì‚¬ë ¹ê´€ ì§€ë ¹. ë…ë„ë¥¼ ì¼ë³¸ì˜ í†µì¹˜ê¶Œ ë° í–‰ì • êµ¬ì—­ì—ì„œ ëª…ì‹œì ìœ¼ë¡œ ì œì™¸.", source: "[10]", category: 4 },
            { year: 1951, title: "ìƒŒí”„ë€ì‹œìŠ¤ì½” ê°•í™”ì¡°ì•½", content: "ì¼ë³¸ì´ í•œêµ­ì˜ ë…ë¦½ì„ ì¸ì •. ë…ë„ ëª…ì‹œê°€ ëˆ„ë½ë˜ì–´ ì´í›„ ë¶„ìŸì˜ ì”¨ì•—ì´ ë¨.", source: "[11]", category: 4 },
            { year: 1952, title: "í‰í™”ì„  ì„ í¬", content: "ì´ìŠ¹ë§Œ ëŒ€í†µë ¹ì´ ë…ë„ë¥¼ í¬í•¨í•œ ì¸ì ‘ í•´ì–‘ì— ëŒ€í•œ ì£¼ê¶Œ(í‰í™”ì„ ) ì„ ì–¸.", source: "[12]", category: 1 },
            { year: 1953, title: "ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€ í™œë™", content: "í™ìˆœì¹  ë“± ë¯¼ê°„ì¸ë“¤ì´ ë…ë„ì— ìƒì£¼í•˜ë©° ì¼ë³¸ì˜ ì¹¨ë²”ì„ ë§‰ê³  ì‹¤íš¨ì  ì§€ë°° ê°•í™”.", source: "[13], [14]", category: 1 },
            { year: 1965, title: "í•œì¼ê¸°ë³¸ì¡°ì•½", content: "ë…ë„ ë¬¸ì œë¥¼ ì–¸ê¸‰í•˜ì§€ ì•Šê³  ë´‰í•©. ì´í›„ ê°ˆë“±ì˜ ë¶ˆì”¨ê°€ ë‚¨ìŒ.", source: "[15]", category: 4 },
            { year: 1998, title: "ì‹ í•œì¼ì–´ì—…í˜‘ì •", content: "ë…ë„ê°€ í•œì¼ ì¤‘ê°„ìˆ˜ì—­ì— í¬í•¨ë˜ë©° ì˜ìœ ê¶Œ ë° ì–´ì—…ê¶Œ ë…¼ë€ ë°œìƒ.", source: "[16]", category: 3 },
            { year: 2005, title: "ë‹¤ì¼€ì‹œë§ˆì˜ ë‚  ì œì •", content: "ì¼ë³¸ ì‹œë§ˆë„¤í˜„ì´ 2ì›” 22ì¼ì„ 'ë‹¤ì¼€ì‹œë§ˆì˜ ë‚ 'ë¡œ ì œì •í•˜ì—¬ ì˜ìœ ê¶Œ ë„ë°œ.", source: "[17]", category: 3 },
            { year: 2011, title: "ì¼ë³¸ êµê³¼ì„œ ì™œê³¡", content: "ì¼ë³¸ ì¤‘í•™êµ êµê³¼ì„œ 14ì¢…ì— ë…ë„ ì˜ìœ ê¶Œ ì£¼ì¥ì„ ê¸°ìˆ . êµìœ¡ì„ í†µí•œ ì™œê³¡ ì‹¬í™”.", source: "[18]", category: 3 }
        ];

        const colors = {
            1: '#2563eb', 2: '#10b981', 3: '#f43f5e', 4: '#94a3b8'
        };
        const categoryLabels = {
            1: 'í•œêµ­ ì£¼ê¶Œ ê¸°ë¡', 2: 'ì¼ë³¸ì˜ ì¸ì •', 3: 'ë¶„ìŸ ë° ì™œê³¡', 4: 'êµ­ì œ ì¡°ì•½'
        };

        let mainChartInstance = null;
        let analysisChartInstance = null;

        document.addEventListener('DOMContentLoaded', () => {
            // Set global font defaults for Chart.js
            Chart.defaults.font.family = "'Pretendard', sans-serif";
            Chart.defaults.color = '#64748b';
            initApp();
        });

        function initApp() {
            renderEventList();
            renderTimelineChart();
            renderAnalysisChart();
            updateFocusCard(dokdoData[0]);
        }

        function renderEventList() {
            const listContainer = document.getElementById('event-list');
            listContainer.innerHTML = '';
            dokdoData.forEach((item) => {
                const el = document.createElement('div');
                el.className = `p-4 rounded-xl cursor-pointer border-l-4 card-transition bg-slate-50 hover:bg-white border-transparent`;
                
                if(item.category === 1) el.style.borderLeftColor = colors[1];
                else if(item.category === 2) el.style.borderLeftColor = colors[2];
                else if(item.category === 3) el.style.borderLeftColor = colors[3];
                else el.style.borderLeftColor = colors[4];

                el.innerHTML = `
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-black text-slate-800 text-sm">${item.year}</span>
                        <span class="text-[10px] font-bold text-slate-300 uppercase">${item.source}</span>
                    </div>
                    <div class="text-sm text-slate-600 font-semibold truncate">${item.title}</div>
                `;
                el.addEventListener('click', () => updateFocusCard(item));
                listContainer.appendChild(el);
            });
        }

        function updateFocusCard(data) {
            const card = document.getElementById('detail-card');
            const header = document.getElementById('detail-header');
            const year = document.getElementById('detail-year');
            const title = document.getElementById('detail-title');
            const content = document.getElementById('detail-content');
            const source = document.getElementById('detail-source');
            const icon = document.getElementById('detail-icon');

            card.style.opacity = '0';
            card.style.transform = 'translateY(10px)';

            setTimeout(() => {
                year.innerText = `${data.year}`;
                title.innerText = data.title;
                content.innerText = data.content;
                source.innerText = data.source;
                
                header.style.backgroundColor = colors[data.category];
                
                if(data.category === 1) icon.innerText = "ğŸ‡°ğŸ‡·"; 
                else if(data.category === 2) icon.innerText = "ğŸ“œ";
                else if(data.category === 3) icon.innerText = "âš ï¸";
                else icon.innerText = "ğŸŒ";

                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, 200);
        }

        function renderTimelineChart() {
            const ctx = document.getElementById('timelineChart').getContext('2d');
            const chartData = dokdoData.map(item => ({
                x: item.year, y: 1, r: 8, raw: item
            }));

            mainChartInstance = new Chart(ctx, {
                type: 'bubble',
                data: {
                    datasets: [{
                        data: chartData,
                        backgroundColor: chartData.map(d => colors[d.raw.category] + 'cc'),
                        borderColor: chartData.map(d => colors[d.raw.category]),
                        borderWidth: 2, hoverRadius: 14, hoverBorderWidth: 4
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: {
                        x: { 
                            min: 1420, max: 2040, 
                            title: { display: false }, 
                            grid: { display: false },
                            ticks: { font: { weight: 'bold' } }
                        },
                        y: { display: false, min: 0, max: 2 }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            enabled: true,
                            displayColors: false,
                            padding: 12,
                            backgroundColor: '#1e293b',
                            titleFont: { size: 14, weight: 'bold' },
                            bodyFont: { size: 12 },
                            callbacks: {
                                title: (ctx) => `${ctx[0].raw.raw.year}ë…„`,
                                label: (ctx) => ctx.raw.raw.title
                            }
                        }
                    },
                    onClick: (evt, activeElements) => {
                        if (activeElements.length > 0) {
                            updateFocusCard(chartData[activeElements[0].index].raw);
                        }
                    }
                }
            });
        }

        function renderAnalysisChart() {
            const ctx = document.getElementById('categoryChart').getContext('2d');
            const counts = {1:0, 2:0, 3:0, 4:0};
            dokdoData.forEach(d => counts[d.category]++);

            analysisChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.values(categoryLabels),
                    datasets: [{
                        data: [counts[1], counts[2], counts[3], counts[4]],
                        backgroundColor: [colors[1], colors[2], colors[3], colors[4]],
                        borderWidth: 0,
                        cutout: '75%'
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: {
                        legend: { 
                            position: 'right', 
                            labels: { 
                                usePointStyle: true,
                                pointStyle: 'circle',
                                padding: 20,
                                font: { size: 12, weight: 'bold' }
                            } 
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
